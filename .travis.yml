language: python
python: 3.6
branches:
  only:
  - gh-pages
  - /.*/
before_install:
  - rvm default
  - gem install json kramdown jekyll
  - sudo apt-get install -y r-base
  - sudo Rscript -e "install.packages('knitr', dependencies = TRUE)"
  - sudo Rscript -e "install.packages('stringr', dependencies = TRUE)"
  - sudo Rscript -e "install.packages('checkpoint', dependencies = TRUE)"
install:
  - pip install pyyaml
script:
  - make lesson-check-all
  - make --always-make site
